{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anton\\\\OneDrive\\\\Desktop\\\\Trackz\\\\trackz-web\\\\src\\\\components\\\\FormularioLogin\\\\FormularioLogin.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport Botao from '../Botao/botao'; //\nimport styles from './FormularioLogin.module.css'; //\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../../contexts/AuthContext'; //\nimport { login } from '../../services/authService'; // 1. ADICIONE A IMPORTAÇÃO DA FUNÇÃO 'login'\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormularioLogin = () => {\n  _s();\n  const [usuario, setUsuario] = useState('');\n  const [senha, setSenha] = useState('');\n  const [erros, setErros] = useState({});\n  const navigate = useNavigate();\n  const authContext = useContext(AuthContext);\n  const validarCampos = () => {\n    const novosErros = {};\n    if (!usuario) novosErros.usuario = 'Usuário é obrigatório.';\n    if (!senha) novosErros.senha = 'Senha é obrigatória.';\n    setErros(novosErros);\n    return Object.keys(novosErros).length === 0;\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    if (!validarCampos()) return;\n    setErros(prev => ({\n      ...prev,\n      geral: undefined\n    }));\n    try {\n      const dadosParaLogin = {\n        username: usuario,\n        senha\n      };\n      // 2. USE A FUNÇÃO 'login' DIRETAMENTE\n      const data = await login(dadosParaLogin);\n      if (authContext && data.access_token) {\n        authContext.login(data.access_token);\n        navigate('/dashboard');\n      } else {\n        throw new Error('Não foi possível obter o token de acesso.');\n      }\n    } catch (error) {\n      console.error('Erro no login:', error);\n      setErros(prev => ({\n        ...prev,\n        geral: error.message || 'Ocorreu um erro.'\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: styles.form,\n    onSubmit: handleLogin,\n    children: [erros.geral && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: styles.errorGeral,\n      children: erros.geral\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.campo,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"usuario\",\n        children: \"Usu\\xE1rio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"usuario\",\n        type: \"text\",\n        value: usuario,\n        onChange: e => setUsuario(e.target.value),\n        placeholder: \"Digite seu usu\\xE1rio\",\n        className: styles.input // Garanta que a classe de estilo do input está aqui\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), erros.usuario && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.erro,\n        children: erros.usuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.campo,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"senha\",\n        children: \"Senha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"senha\",\n        type: \"password\",\n        value: senha,\n        onChange: e => setSenha(e.target.value),\n        placeholder: \"Digite sua senha\",\n        className: styles.input // Garanta que a classe de estilo do input está aqui\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), erros.senha && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.erro,\n        children: erros.senha\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Botao, {\n      type: \"submit\",\n      children: \"Entrar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(FormularioLogin, \"Pd70YWKzavTG6gmsR6isKDyK3Xo=\", false, function () {\n  return [useNavigate];\n});\n_c = FormularioLogin;\nexport default FormularioLogin;\nvar _c;\n$RefreshReg$(_c, \"FormularioLogin\");","map":{"version":3,"names":["React","useState","useContext","Botao","styles","useNavigate","AuthContext","login","jsxDEV","_jsxDEV","FormularioLogin","_s","usuario","setUsuario","senha","setSenha","erros","setErros","navigate","authContext","validarCampos","novosErros","Object","keys","length","handleLogin","e","preventDefault","prev","geral","undefined","dadosParaLogin","username","data","access_token","Error","error","console","message","className","form","onSubmit","children","errorGeral","fileName","_jsxFileName","lineNumber","columnNumber","campo","htmlFor","id","type","value","onChange","target","placeholder","input","erro","_c","$RefreshReg$"],"sources":["C:/Users/anton/OneDrive/Desktop/Trackz/trackz-web/src/components/FormularioLogin/FormularioLogin.tsx"],"sourcesContent":["import React, { useState, useContext, FormEvent, ChangeEvent } from 'react';\r\nimport Botao from '../Botao/botao'; //\r\nimport styles from './FormularioLogin.module.css'; //\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { AuthContext, AuthContextType } from '../../contexts/AuthContext'; //\r\nimport { login } from '../../services/authService'; // 1. ADICIONE A IMPORTAÇÃO DA FUNÇÃO 'login'\r\n\r\ninterface ErrosLogin {\r\n  usuario?: string;\r\n  senha?: string;\r\n  geral?: string;\r\n}\r\n\r\nconst FormularioLogin: React.FC = () => {\r\n  const [usuario, setUsuario] = useState('');\r\n  const [senha, setSenha] = useState('');\r\n  const [erros, setErros] = useState<ErrosLogin>({});\r\n  const navigate = useNavigate();\r\n  const authContext = useContext(AuthContext) as AuthContextType;\r\n\r\n  const validarCampos = () => {\r\n    const novosErros: ErrosLogin = {};\r\n    if (!usuario) novosErros.usuario = 'Usuário é obrigatório.';\r\n    if (!senha) novosErros.senha = 'Senha é obrigatória.';\r\n    setErros(novosErros);\r\n    return Object.keys(novosErros).length === 0;\r\n  };\r\n\r\n  const handleLogin = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (!validarCampos()) return;\r\n\r\n    setErros(prev => ({ ...prev, geral: undefined }));\r\n\r\n    try {\r\n      const dadosParaLogin = { username: usuario, senha };\r\n      // 2. USE A FUNÇÃO 'login' DIRETAMENTE\r\n      const data = await login(dadosParaLogin);\r\n\r\n      if (authContext && data.access_token) {\r\n        authContext.login(data.access_token);\r\n        navigate('/dashboard');\r\n      } else {\r\n        throw new Error('Não foi possível obter o token de acesso.');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Erro no login:', error);\r\n      setErros(prev => ({ ...prev, geral: error.message || 'Ocorreu um erro.' }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className={styles.form} onSubmit={handleLogin}>\r\n        {erros.geral && <span className={styles.errorGeral}>{erros.geral}</span>}\r\n      <div className={styles.campo}>\r\n        <label htmlFor=\"usuario\">Usuário</label>\r\n        <input\r\n          id=\"usuario\"\r\n          type=\"text\"\r\n          value={usuario}\r\n          onChange={(e) => setUsuario(e.target.value)}\r\n          placeholder=\"Digite seu usuário\"\r\n          className={styles.input} // Garanta que a classe de estilo do input está aqui\r\n        />\r\n        {erros.usuario && <span className={styles.erro}>{erros.usuario}</span>}\r\n      </div>\r\n      <div className={styles.campo}>\r\n        <label htmlFor=\"senha\">Senha</label>\r\n        <input\r\n          id=\"senha\"\r\n          type=\"password\"\r\n          value={senha}\r\n          onChange={(e) => setSenha(e.target.value)}\r\n          placeholder=\"Digite sua senha\"\r\n          className={styles.input} // Garanta que a classe de estilo do input está aqui\r\n        />\r\n        {erros.senha && <span className={styles.erro}>{erros.senha}</span>}\r\n      </div>\r\n      <Botao type=\"submit\">Entrar</Botao>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default FormularioLogin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}